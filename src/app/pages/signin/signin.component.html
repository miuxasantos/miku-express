<div class="signin-page">
  <p-toast></p-toast>

  <section class="intro">
    <div class="intro__text">
      <h1>Entrar na Miku Express</h1>
      <p>
        Conecte-se ao seu painel para acompanhar entregas, criar novos envios e receber notificações em tempo real.
      </p>
      <div class="intro__tags">
        <p-tag value="Painel para clientes" severity="info"></p-tag>
        <p-tag value="Gestão para admins" severity="success"></p-tag>
      </div>
    </div>

    <p-card class="intro__card">
      <ng-template pTemplate="header">
        <h2>Acesso rápido</h2>
        <span>Para clientes e administradores</span>
      </ng-template>

      <div class="intro__card-body">
        <div class="card-row">
          <i class="pi pi-shield"></i>
          <div>
            <strong>Autenticação segura</strong>
            <p>Token JWT com duração de 60 minutos e renovação automática.</p>
          </div>
        </div>
        <div class="card-row">
          <i class="pi pi-bell"></i>
          <div>
            <strong>Alertas inteligentes</strong>
            <p>Receba avisos sobre cada atualização de status dos seus pacotes.</p>
          </div>
        </div>
      </div>
    </p-card>
  </section>

  <section class="form-section">
    <p-card class="form-card">
      <ng-template pTemplate="header">
        <h2>Faça login</h2>
        <span>Acesse com seu e-mail cadastrado</span>
      </ng-template>

      <form #signinForm="ngForm" (ngSubmit)="login(signinForm)" novalidate>
        <div class="input-group" [class.invalid]="emailCtrl.invalid && (emailCtrl.dirty || emailCtrl.touched || signinForm.submitted)">
          <label for="email">E-mail *</label>
          <input
            id="email"
            type="email"
            name="email"
            pInputText
            required
            autocomplete="email"
            placeholder="nome@mikuexpress.com"
            [(ngModel)]="credentials.email"
            #emailCtrl="ngModel"
          />
          <small *ngIf="emailCtrl.errors?.['required'] && (emailCtrl.dirty || emailCtrl.touched || signinForm.submitted)">
            Informe seu e-mail de acesso.
          </small>
          <small *ngIf="emailCtrl.errors?.['email'] && (emailCtrl.dirty || emailCtrl.touched || signinForm.submitted)">
            Digite um e-mail válido.
          </small>
        </div>

        <div class="input-group" [class.invalid]="passwordCtrl.invalid && (passwordCtrl.dirty || passwordCtrl.touched || signinForm.submitted)">
          <label for="password">Senha *</label>
          <p-password
            id="password"
            name="password"
            required
            feedback="false"
            toggleMask="true"
            [inputStyle]="{ 'font-size': '1rem' }"
            placeholder="Digite sua senha"
            [(ngModel)]="credentials.password"
            #passwordCtrl="ngModel"
          ></p-password>
          <small *ngIf="passwordCtrl.invalid && (passwordCtrl.dirty || passwordCtrl.touched || signinForm.submitted)">
            Informe a senha cadastrada.
          </small>
        </div>

        <div class="form-actions">
          <button
            type="submit"
            pButton
            class="submit-button"
            label="Entrar"
            icon="pi pi-sign-in"
            [loading]="isSubmitting"
            [disabled]="isSubmitting"
          ></button>
        </div>
      </form>

      <p-divider align="center">
        <span>Ou</span>
      </p-divider>

      <div class="links">
        <span>Ainda não tem conta?</span>
        <a routerLink="/signup">Criar meu cadastro</a>
      </div>
    </p-card>

    <div class="side-info">
      <p-card>
        <h3>Miku Dica</h3>
        <p>
          Clientes públicos podem criar pedidos e acompanhar o status em tempo real. Administradores têm acesso ao painel
          completo para atualização de rotas, preços e notificações.
        </p>
        <ul>
          <li>Atualize sua senha regularmente</li>
          <li>Mantenha o e-mail corporativo validado</li>
          <li>Ative as notificações para receber alertas instantâneos</li>
        </ul>
      </p-card>
    </div>
  </section>
</div>
