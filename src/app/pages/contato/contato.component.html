<div class="contato-page">
  <p-toast></p-toast>

  <section class="hero">
    <div class="hero__content">
      <h1>Teve algum problema?</h1>
      <p>
        Fique à vontade para cantar com os nossos atendentes e resolvermos qualquer dúvida ou problema!
      </p>
      <img class="hero__img" src="assets/miku2.webp" />
    </div>

    <p-card class="hero__card" header="{{ officeInfo.name }}" subheader="Base de atendimento principal">
      <div class="hero__card-content">
        <div class="info-row">
          <i class="pi pi-map-marker"></i>
          <div>
            <strong>Endereço</strong>
            <p>
              {{ officeInfo.address }} - {{ officeInfo.district }}<br>
              {{ officeInfo.city }} · CEP {{ officeInfo.zipCode }}
            </p>
          </div>
        </div>

        <div class="info-row">
          <i class="pi pi-phone"></i>
          <div>
            <strong>Central Telefônica</strong>
            <p>{{ officeInfo.phone }}</p>
          </div>
        </div>

        <div class="info-row">
          <i class="pi pi-clock"></i>
          <div>
            <strong>Horário de Atendimento</strong>
            <p>{{ officeInfo.supportHours }}<br>{{ officeInfo.supportHoursWeekend }}</p>
          </div>
        </div>

        <div class="info-row">
          <i class="pi pi-envelope"></i>
          <div>
            <strong>E-mail oficial</strong>
            <p>{{ officeInfo.email }}</p>
          </div>
        </div>
      </div>
    </p-card>
  </section>

  <section class="content-grid">
    <p-card class="form-card">
      <ng-template pTemplate="header">
        <h2>Envie uma mensagem</h2>
        <span>Responderemos em até 24 horas úteis</span>
      </ng-template>

      <form #contactForm="ngForm" (ngSubmit)="enviarMensagem(contactForm)" novalidate>
        <div class="form-row">
          <div class="input-group" [class.invalid]="nameCtrl.invalid && (nameCtrl.dirty || nameCtrl.touched || contactForm.submitted)">
            <label for="name">Nome completo *</label>
            <input
              id="name"
              type="text"
              name="name"
              pInputText
              required
              autocomplete="name"
              [(ngModel)]="formData.name"
              #nameCtrl="ngModel"
              placeholder="Como podemos te chamar?"
            />
            <small *ngIf="nameCtrl.invalid && (nameCtrl.dirty || nameCtrl.touched || contactForm.submitted)">
              Informe seu nome completo.
            </small>
          </div>

          <div class="input-group" [class.invalid]="emailCtrl.invalid && (emailCtrl.dirty || emailCtrl.touched || contactForm.submitted)">
            <label for="email">E-mail *</label>
            <input
              id="email"
              type="email"
              name="email"
              pInputText
              required
              email
              autocomplete="email"
              [(ngModel)]="formData.email"
              #emailCtrl="ngModel"
              placeholder="nome@empresa.com"
            />
            <small *ngIf="emailCtrl.errors?.['required'] && (emailCtrl.dirty || emailCtrl.touched || contactForm.submitted)">
              Informe um e-mail para contato.
            </small>
            <small *ngIf="emailCtrl.errors?.['email'] && (emailCtrl.dirty || emailCtrl.touched || contactForm.submitted)">
              Digite um e-mail válido.
            </small>
          </div>
        </div>

        <div class="input-group" [class.invalid]="subjectCtrl.invalid && (subjectCtrl.dirty || subjectCtrl.touched || contactForm.submitted)">
          <label for="subject">Assunto *</label>
          <input
            id="subject"
            type="text"
            name="subject"
            pInputText
            required
            [(ngModel)]="formData.subject"
            #subjectCtrl="ngModel"
            placeholder="Ex: Cotação para entregas semanais"
          />
          <small *ngIf="subjectCtrl.invalid && (subjectCtrl.dirty || subjectCtrl.touched || contactForm.submitted)">
            Conte-nos sobre o motivo do contato.
          </small>
        </div>

        <div class="input-group" [class.invalid]="messageCtrl.invalid && (messageCtrl.dirty || messageCtrl.touched || contactForm.submitted)">
          <label for="message">Mensagem *</label>
          <textarea
            id="message"
            name="message"
            rows="6"
            pInputTextarea
            required
            [(ngModel)]="formData.message"
            #messageCtrl="ngModel"
            placeholder="Compartilhe os detalhes que precisamos saber para ajudar você."
          ></textarea>
          <small *ngIf="messageCtrl.invalid && (messageCtrl.dirty || messageCtrl.touched || contactForm.submitted)">
            Descreva sua necessidade para que possamos ajudar.
          </small>
        </div>

        <div class="form-actions">
          <button
            type="submit"
            pButton
            class="submit-button"
            label="Enviar mensagem"
            icon="pi pi-send"
            [loading]="isSubmitting"
            [disabled]="isSubmitting"
          ></button>
        </div>
      </form>
    </p-card>

    <div class="info-column">
      <p-card class="social-card">
        <h3>Redes Oficiais</h3>
        <p>
          Acompanhe bastidores, novidades e as próximas parcerias musicais da nossa operação logística.
        </p>
        <div class="social-list">
          <a *ngFor="let social of socialLinks" [href]="social.url" target="_blank" rel="noopener">
            <i class="pi" [ngClass]="social.icon"></i>
            <span>{{ social.label }}</span>
          </a>
        </div>
      </p-card>
    </div>
  </section>

  <p-divider></p-divider>
</div>
